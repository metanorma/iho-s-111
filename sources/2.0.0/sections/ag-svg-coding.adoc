
[[annex-g]]
[appendix,obligation="informative"]
== Scalable Vector Graphics (SVG) Coding (Informative)

The Surface Current arrow symbols are defined in the IHO GI Registry and included in the Portrayal Catalogue. The following is a sample of typical symbol files (courtesy of R. Malyankar, Portolan Sciences) and a few images created from the files.

NOTE: The contents of this Annex are "as of publication" and may be revised for usability and interoperability based on user testing and ECDIS requirements in <<S_98>> and applicable IMO/IEC standards. The content of the S-111 Portrayal Catalogue should prevail in case of conflict between the latest formal release of the Portrayal Catalogue and the contents of this Annex.

[[sec_G-1]]
=== Sample SVG Images

Sample images showing the vector arrows generated by the SVG and CSS codes appear in <<fig_G-1>>. The image was created by opening the file in Microsoft Internet Explorer(C).

[[fig_G-1]]
.Web browser images of the arrows for speed bands 1 through 9 (day conditions), as generated by the .svg and .css codes in this Annex. Shown larger than actual size
image::figure-g-1.png[]

[[sec_G-2]]
=== Sample SVG File to Display Arrows

SVG symbols for arrows conform to the SVG profile described in <<S_100,part=9,annex=9-B>>. The sample .svg file shown (<<fig_G-2>>) describes a typical SVG file for symbol SCAROW01, the arrow for speed band 1, day light conditions. The fill and border colours of the arrow symbols are designated by the "class" attributes on the "path" elements, and the actual colours corresponding to each class are defined in the CSS style files for day/night/dusk palettes. Symbols for other bands are similar but designate different fill colours.

The coordinate system for the symbol is defined as follows:

* The overall width and height of the symbol are defined in mm.
* The viewbox covers the range of coordinates used for the symbol.
* The pivot point of the symbol is designed to be at the 0.0, 0.0 position.
* The default coordinate system used for S-100 SVG has the origin in the upper left corner with the x axis pointing to the right and the y-axis pointing down.

For example, using the image coordinates shown in <<fig_9-1>>, the SVG coordinate system, and Lref of stem:[10 "unitsml(mm)"], a 'path' command would contain

M -0.5, 5. L -0.5, 5.0 -1.0,-1.5 -2.,-1.5 0.,-5.0 2.0,-1.5 1.0,-1.5 0.5,5.0 -0.5, 5.0 Z

where M is the move to instruction, L is the line to instruction, and Z denotes the end of the drawing. The coordinates are given in mm.

[[fig_G-2]]
.SVG code for the arrow symbol for speed band 1 (SCAROW01).
[source,xml]
--
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="style.css" type="text/css"?>
<svg xmlns:iho="http://www.iho.int/SVGMetadata/5.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://www.w3.org/2000/svg"
	xsi:schemaLocation="http://www.w3.org/2000/svg https://schemas.s100dev.net/schemas/S100/5.2.0/S100PC/20240415/S100SVG.xsd"
	baseProfile="tiny"
	version="1.2"
	xml:space="preserve"
	shape-rendering="geometricPrecision"
	fill-rule="evenodd"
	width="6mm" height="11mm" viewBox="-3 -5.5 6 11">
	<title>SCAROW01</title>
	<desc>Surface Current and Speed Vector Band 1</desc>
	<metadata>
		<iho:S100SVG>
		<iho:Description iho:publisher="NOAA" iho:creationDate="2024-02-13" iho:source="S-111" iho:format="S100SVG" iho:version="0.2"/>
	</iho:S100SVG>
	</metadata>
	<rect class="symbolBox layout" fill="none" x="-3" y="-5.5" height="11" width="6"/>
	<rect class="svgBox layout" fill="none" x="-3" y="-5.5" height="11" width="6"/>
	<path d=" M 0,5 L -0.5,5 L -1.0,-1.5 L -2.0,-1.5 L 0,-5 L 2.0,-1.5 L 1.0,-1.5 L 0.5,5 L 0,5 Z" class="fSCBN1"/>
	<path d=" M 0,5 L -0.5,5 L -1.0,-1.5 L -2.0,-1.5 L 0,-5 L 2.0,-1.5 L 1.0,-1.5 L 0.5,5 L 0,5 Z" class="sl f0 sCHBLK" style="stroke-width:0.32;"/>
	<circle class="pivotPoint layout" fill="none" cx="0" cy="0" r="1"/>
</svg>
--

[[sec_G-3]]
=== Sample CSS File

Below (<<fig_G-3>>) is the Cascading Style Sheet (css) file used in
<<fig_G-1>>. This file defines colours for the "day" palette. Similar
files are provided for "dusk" and "night" palettes. Switching between
palettes is managed by the application software and rendering system.

[[fig_G-3]]
.CSS file for surface current arrow symbols, Day condition.
[source]
--
/*
* CSS styles for S-111 Day color table
* Source: S-111 V. 2.0.0-20240606
*/
.layout { display:none } /* used to control visibility of symbolBox, svgBox, pivotPoint (none or inline) */
.svgBox { fill: none; stroke: blue; stroke-width:0.32; } /* show the entire SVG cover */
.pivotPoint { fill: none; stroke: red; stroke-width:0.64;} /* show the pivot/anchor point, 0,0 */
.symbolBox {stroke:black;stroke-width:0.32;} /* show the cover of the symbol graphics */
.sl {stroke-linecap:round;stroke-linejoin:round} /* default line style elements */
.f0 {fill:none} /* no fill */
.sCHBLK {stroke:#000000} /* sRGB line colour for all surface current arrow tokens */
.fSCBN1 {fill:#7652E2} /* sRGB line colour for colour token STEP1: S111 Step 1 color */
.fSCBN2 {fill:#4898D3} /* sRGB line colour for colour token STEP2: S111 Step 2 color */
.fSCBN3 {fill:#61CBE5} /* sRGB line colour for colour token STEP3: S111 Step 3 color */
.fSCBN4 {fill:#6DBC45} /* sRGB line colour for colour token STEP4: S111 Step 4 color */
.fSCBN5 {fill:#B4DC00} /* sRGB line colour for colour token STEP5: S111 Step 5 color */
.fSCBN6 {fill:#CDC100} /* sRGB line colour for colour token STEP6: S111 Step 6 color */
.fSCBN7 {fill:#F8A718} /* sRGB line colour for colour token STEP7: S111 Step 7 color */
.fSCBN8 {fill:#F7A29D} /* sRGB line colour for colour token STEP8: S111 Step 8 color */
.fSCBN9 {fill:#FF1E1E} /* sRGB line colour for colour token STEP9: S111 Step 9 color */
--
